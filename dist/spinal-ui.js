//	SpinalJS Ui@0.0.1 (c) 2014 Patricio Ferreira <3dimentionar@gmail.com>, 3dimention.com
//	SpinalJS may be freely distributed under the MIT license.
//	For all details and documentation: http://3dimention.github.io/spinal
define("ui/view",["core/spinal","util/string","util/exception/ui","templates/spinal","libs/bootstrap"],function(e,t,n){var r=e.namespace("com.spinal.ui.View",e.Backbone.View.inherit({id:t.uuid(),events:{},className:"ui-view",method:"append",_successor:null,_theme:null,constructor:function(e){e||(e={}),Backbone.View.apply(this,arguments),this.id=e.id?e.id:this.$el.attr("id")?this.$el.attr("id"):this.id,this.$el.attr("id",this.id)},initialize:function(e){return e||(e={}),this._valid(e),e.el&&this.$el.addClass(this.className),e.theme&&(this._theme=e.theme,this.$el.addClass(this._theme)),e.method&&(this.method=e.method),this.template=this._compile(e.template?e.template:this.template),this},_valid:function(e){e||(e={});if(e.id&&!_.isString(e.id))throw new n("InvalidIDType");if(!e.model||e.model instanceof Backbone.Model){if(e.method&&!r.RENDER[e.method])throw new n("UnsupportedRenderMethod",{method:"non-existent-method"});return!0}throw new n("InvalidModelType")},_beforeRender:function(t){if(!
this._successor)throw new n("SuccessorNotSpecified");if(this._successor instanceof e.com.spinal.ui.Container){if(!this._successor.findById(this.id))throw new n("UIStackViolation",{viewId:"view-error",succesorId:"container-declared-inline"});return this}throw new n("InvalidSuccessorType")},_compile:function(e){return e||(e=""),_.isFunction(e)?e:_.template(e)},theme:function(e){return!e||!_.isString(e)?this:(this.$el.removeClass(this._theme).addClass(e),this._theme=e,this)},render:function(e){e||(e={}),this._beforeRender(arguments).detach();var t=e.method&&r.RENDER[e.method]?e.method:this.method,n=this.model?this.model.toJSON():this._successor.model?this._successor.model.toJSON():{};return this._successor._targetEl()[t](this.template?this.$el.append(this.template(n)):this.$el),e.silent||this.trigger(r.EVENTS.rendered,{view:this}),this.delegateEvents(),this},update:function(e){return(!e||!e.silent)&&this.trigger(r.EVENTS.updated,{view:this}),this},lookup:function(e){return e?this._next(e):
null},addClass:function(e){return e?(this.$el.addClass(e),this):this},removeClass:function(e){return e?(this.$el.removeClass(e),this):this},show:function(e){return this.$el.show(),(!e||!e.silent)&&this.trigger(r.EVENTS.shown,{view:this}),this},hide:function(e){return this.$el.hide(),(!e||!e.silent)&&this.trigger(r.EVENTS.hidden,{view:this}),this},enable:function(e){return this.$el.removeAttr("disabled"),(!e||!e.silent)&&this.trigger(r.EVENTS.enabled,{view:this}),this},disable:function(e){return this.$el.attr("disabled","true"),(!e||!e.silent)&&this.trigger(r.EVENTS.disabled,{view:this}),this},detach:function(e){return r.__super__.remove.apply(this,arguments),(!e||!e.silent)&&this.trigger(r.EVENTS.detached,{view:this}),this},_next:function(e){return this.id===e?this:this._successor?this._successor.lookup(e):null},toString:function(){return"[object View]"}},{NAME:"View",RENDER:{append:"append",prepend:"prepend",appendTo:"appendTo",prependTo:"prependTo",html:"html"},EVENTS:{shown:"com:spinal:ui:view:shown"
,hidden:"com:spinal:ui:view:hidden",enabled:"com:spinal:ui:view:enabled",disabled:"com:spinal:ui:view:disabled",rendered:"com:spinal:ui:view:rendered",updated:"com:spinal:ui:view:updated",detached:"com:spinal:ui:view:detached"}}));return r}),define("ui/container",["core/spinal","ui/view","util/adt/collection","util/exception/ui"],function(e,t,n,r){var i=e.namespace("com.spinal.ui.Container",t.inherit({className:"ui-container container",views:null,constructor:function(){t.apply(this,arguments)},initialize:function(e){return e||(e={}),i.__super__.initialize.apply(this,arguments),this.views=new n([],e.interface?{"interface":e.interface}:{}),this},_valid:function(e){e||(e={}),i.__super__._valid.apply(this,arguments);if(!e.interface||new e.interface instanceof Backbone.View)return!0;throw new r("InvalidInterfaceType")},_resolveSuccesor:function(){if(!this._successor){var e=this.$el.parent().length>0?this.$el.parent()[0].nodeName.toLowerCase():"body";this._successor=new i({el:e}),this._successor
.add(this,{silent:!0})}return this},_targetEl:function(){return this.$el},theme:function(e){return this.views.isEmpty()||this.invoke("theme",arguments),i.__super__.theme.apply(this,arguments),this},render:function(){return this._resolveSuccesor(),i.__super__.render.apply(this,arguments),this.invoke("render",arguments),this},update:function(e){return e||(e={}),i.__super__.update.apply(this,arguments),this.invoke("update",arguments),this},add:function(e,t){return t||(t={}),this.findById(e.id)||(e=this.views.add(e),e._successor=this,t.renderOnAdd&&e.render(t),t.silent||this.trigger(i.EVENTS.added,{added:e,view:this})),e},addAll:function(e,t){return t||(t={}),_.map(e,function(e){return this.add(e,t)},this)},remove:function(e,t){t||(t={});var n=this.getPos(e);return _.isNull(n)||(this.views.remove(n),e._successor=null,t.detachOnRemove&&e.detach(),t.silent||this.trigger(i.EVENTS.removed,{removed:e,view:this})),this},removeAll:function(){return this.views.isEmpty()||this.invoke("detach",arguments
),this.views.reset(),this},get:function(e){return this.views.get(e)},getPos:function(e){return this.views.findPosBy(function(t){return t.id&&t.id===e.id})},findById:function(e){return e?this.views.find(function(t){return t.id&&t.id===e}):null},filter:function(e){return this.views.findBy(e)},invoke:function(e){if(this.views.size()===0)return[];var t=Array.prototype.slice.call(arguments,1);return this.views.invoke(e,t)},show:function(){return i.__super__.show.apply(this,arguments),this.invoke("show",arguments),this},hide:function(){return i.__super__.hide.apply(this,arguments),this.invoke("hide",arguments),this},enable:function(){return i.__super__.enable.apply(this,arguments),this.invoke("enable",arguments),this},disable:function(){return i.__super__.disable.apply(this,arguments),this.invoke("disable",arguments),this},detach:function(){return this.views.isEmpty()||this.invoke("detach",arguments),i.__super__.detach.apply(this,arguments),this},toString:function(){return"[object Container]"
}},{NAME:"Container",EVENTS:{added:"com:spinal:ui:container:added",removed:"com:spinal:ui:container:removed"}}));return i}),define("ui/basic/paragraph",["ui/view"],function(e){var t=Spinal.namespace("com.spinal.ui.basic.Paragraph",e.inherit({className:"ui-paragrah",tagName:"p",_content:"",initialize:function(e){return e||(e={}),e.content&&(this._content=e.content),t.__super__.initialize.apply(this,arguments),this},render:function(e){return t.__super__.render.apply(this,arguments),this.content()},content:function(e){return this._content=e?e:this._content,this.$el.html(this._content),this}},{NAME:"Paragraph"}));return t}),define("ui/basic/link",["ui/basic/paragraph"],function(e){var t=Spinal.namespace("com.spinal.ui.basic.Link",e.inherit({className:"ui-link",tagName:"a",_href:"",initialize:function(e){return e||(e={}),e.href&&(this._href=e.href),t.__super__.initialize.apply(this,arguments),this},render:function(e){return t.__super__.render.apply(this,arguments),this.href()},href:function(
e){return this._href=e?e:this._href,this.$el.attr("href",this._href),this}},{NAME:"Link"}));return t}),define("ui/misc/panel",["ui/container"],function(e){var t=Spinal.namespace("com.spinal.ui.misc.Panel",e.inherit({className:"ui-panel panel",tagName:"div",_title:"Default Title",_type:null,template:Spinal.app.html_tpl("spinal.basic.panel",{}),initialize:function(e){return e||(e={}),e.title&&(this._title=e.title),this._type=e.type?e.type:t.TYPES.standard,t.__super__.initialize.apply(this,arguments),this},_targetEl:function(){return this.$el.children(".panel-body")},render:function(e){return t.__super__.render.apply(this,arguments),this.title().type()},title:function(e){return this._title=e?e:this._title,this.$el.children(".panel-heading").html(this._title),this},type:function(e){return this.$el.removeClass(this._type),this._type=e&&e!==this._type?e:this._type,this.$el.addClass(this._type),this}},{NAME:"Panel",TYPES:{standard:"panel-default",primary:"panel-primary",success:"panel-success"
,info:"panel-info",warning:"panel-warning",danger:"panel-danger"}}));return t}),define("ui/form/controls/button",["ui/view"],function(e){var t=Spinal.namespace("com.spinal.ui.form.controls.Button",e.inherit({events:{click:"_onClick"},className:"ui-button btn",tagName:"button",_text:"default",_type:null,initialize:function(e){return e||(e={}),e.text&&(this._text=e.text),this._type=e.type?e.type:t.TYPES.standard,t.__super__.initialize.apply(this,arguments),this},render:function(e){return t.__super__.render.apply(this,arguments),this.text().type()},text:function(e){return this._text=e?e:this._text,this.$el.html(this._text),this},type:function(e){return this.$el.removeClass(this._type),this._type=e&&e!==this._type?e:this._type,this.$el.addClass(this._type),this},_onClick:function(e){this.trigger(t.EVENTS.clicked,this)}},{NAME:"UIButton",EVENTS:{clicked:"com:spinal:ui:view:form:controls:button"},TYPES:{standard:"btn-default",primary:"btn-primary",success:"btn-success",info:"btn-info",warning
:"btn-warning",danger:"btn-danger",link:"btn-link"}}));return t}),define("spinal-ui",["ui/view","ui/container","ui/basic/paragraph","ui/basic/link","ui/misc/panel","ui/form/controls/button"],function(){});